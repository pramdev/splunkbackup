{
"args": "perc, hist_rate, le",
"definition": "sort $le$\n| eventstats max($hist_rate$) as total_hist_rate, last($le$) as uppermost_bound, count as num_buckets\n| eval rank=exact($perc$)*total_hist_rate\n| streamstats current=f last($le$) as gr, last($hist_rate$) as last_hist_rate\n| eval gr=if(isnull(gr), 0, gr), last_hist_rate=if(isnull(last_hist_rate), 0, last_hist_rate)\n| where $hist_rate$ >= rank\n| head 1\n| eval res=case(lower(uppermost_bound) != \"+inf\" or num_buckets < 2, \"NaN\", lower($le$) == \"+inf\", gr, gr == 0 and $le$ <= 0, $le$, true(), exact(gr + ($le$-gr)*(rank - last_hist_rate) / ($hist_rate$ - last_hist_rate)))\n| fields res\n| rename res as \"histperc\"",
"disabled": "0",
"eai:appName": "search",
"eai:userName": "nobody",
"errormsg": "1st arg \"perc\" must be a number between 0 and 1 (inclusive), 2nd arg \"hist_rate\" should be string representing a field name, and 3rd arg \"le\" must be the field name with the histogram buckets' upper boundaries.",
"iseval": "0",
"name": "histperc(3)",
"owner": "nobody",
"sharing": "app",
"validation": "isnum($perc$) and $perc$ >= 0 and $perc$ <= 1 and isstr($hist_rate$) and isstr($le$)"
}
